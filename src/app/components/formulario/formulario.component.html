@if (loading) {
<lib-ffsj-spinner [fullscreen]="true"></lib-ffsj-spinner>
} @else {
<mat-stepper orientation="vertical" [linear]="false" #stepper>
    <mat-step [stepControl]="personalInfo">
        <form [formGroup]="personalInfo">
            <ng-template matStepLabel>Datos personales</ng-template>
            <div class="form-group mb-3">
                <label for="tipoCandidata" class="text-naranja">Tipo de Candidata</label>
                <mat-radio-group formControlName="tipoCandidata">
                    <mat-radio-button value="adulta">Adulta</mat-radio-button>
                    <mat-radio-button value="infantil">Infantil</mat-radio-button>
                </mat-radio-group>
            </div>
            <div class="form-group mb-3">
                <label for="dni" class="text-naranja">DNI/NIF</label>
                <input type="text" id="dni" class="form-control" formControlName="dni" required>
            </div>
            <div class="form-group mb-3">
                <label for="nombre" class="text-naranja">Nombre completo</label>
                <input type="text" id="nombre" class="form-control" formControlName="nombre" required>
            </div>
            <div class="form-group mb-3">
                <label for="fechaNacimiento" class="text-naranja">Fecha de Nacimiento</label>
                <input type="date" id="fechaNacimiento" class="form-control" formControlName="fechaNacimiento" required>
            </div>
            <div class="form-group mb-3">
                <label for="ciudad" class="text-naranja">Ciudad</label>
                <input type="text" id="ciudad" class="form-control" formControlName="ciudad" required>
            </div>
            <div class="form-group mb-3">
                <label for="telefono" class="text-naranja">Teléfono</label>
                <input type="text" id="telefono" class="form-control" formControlName="telefono" required>
            </div>
            <div class="form-group mb-3">
                <label for="email" class="text-naranja">Email</label>
                <input type="email" id="email" class="form-control" formControlName="email" required>
            </div>
        </form>
    </mat-step>

    <mat-step [stepControl]="fogueresInfo">
        <form [formGroup]="fogueresInfo">
            <ng-template matStepLabel>Datos de la fiesta</ng-template>
            <div class="form-group mb-3">
                <label for="asociacion" class="text-naranja">Asociación</label>
                <select id="asociacion" class="form-control" formControlName="asociacion" required>
                    <option *ngFor="let asociacion of asociaciones" [value]="asociacion.id">{{ asociacion.nombre }}
                    </option>
                </select>
            </div>
            <div class="form-group mb-3">
                <label for="anyosFiesta" class="text-naranja">Años en la Fiesta</label>
                <input type="number" id="anyosFiesta" class="form-control" formControlName="anyosFiesta" required>
            </div>
            <div class="form-group mb-3">
                <label for="curriculum" class="text-naranja">Curriculum festero</label>
                <input type="text" id="curriculum" class="form-control" formControlName="curriculum" required>
            </div>
        </form>
    </mat-step>

    <mat-step [stepControl]="academicInfo">
        <form [formGroup]="academicInfo">
            <ng-template matStepLabel>Formación e información adicional</ng-template>
            <div class="form-group mb-3">
                <label for="formacion" class="text-naranja">Formación</label>
                <input type="text" id="formacion" class="form-control" formControlName="formacion" required>
            </div>
            <div class="form-group mb-3">
                <label for="situacionLaboral" class="text-naranja">Situación Laboral</label>
                <input type="text" id="situacionLaboral" class="form-control" formControlName="situacionLaboral"
                    required>
            </div>
            <div class="form-group mb-3">
                <label for="observaciones" class="text-naranja">Observaciones (alergias, intolerancias...)</label>
                <textarea id="observaciones" class="form-control" formControlName="observaciones" required></textarea>
            </div>
        </form>
    </mat-step>
    <mat-step>
        <ng-template matStepLabel>Documentación</ng-template>
        <form [formGroup]="documentacionForm">
            <div class="form-group mb-3">
                <label for="fotoCalle" class="text-naranja">Foto calle</label>
                <input type="file" id="fotoCalle" class="form-control" (change)="onFileChange($event, 'fotoCalle')"
                    required>
            </div>
            <div class="form-group mb-3">
                <label for="fotoBelleza" class="text-naranja">Foto belleza</label>
                <input type="file" id="fotoBelleza" class="form-control" (change)="onFileChange($event, 'fotoBelleza')"
                    required>
            </div>
            <div class="form-group mb-3">
                <label for="compromisoDisponibilidad" class="text-naranja">Compromiso disponibilidad</label>
                <input type="file" id="compromisoDisponibilidad" class="form-control"
                    (change)="onFileChange($event, 'compromisoDisponibilidad')" required>
            </div>
            <div class="form-group mb-3">
                <label for="derechosImagen" class="text-naranja">Derechos de imagen</label>
                <input type="file" id="derechosImagen" class="form-control"
                    (change)="onFileChange($event, 'derechosImagen')" required>
            </div>
            <div>
                <button type="submit" class="btn btn-primary btn-foc-rojo" (click)="procesar()"
                    [disabled]="personalInfo.invalid || academicInfo.invalid || fogueresInfo.invalid">Enviar</button>
                <!-- <button (click)="procesar()">show</button> -->
            </div>
        </form>
    </mat-step>
</mat-stepper>
}